import{r as T,f as ee,c as _,g as te,d as oe,i as de,j as re,a as m,o as v,b as e,k as B,t as x,u as y,n as G,F as O,l as q,m as R,p as J,q as F,s as Z,e as ue,v as ce}from"./app-DdTHaDCV.js";function ge(D){const o=T(null),t=ee({isPlaying:!1,currentTime:0,duration:0,volume:80,isLoading:!1,error:null,buffered:0,canSeek:!1}),$=_(()=>t.duration===0?0:t.currentTime/t.duration*100),f=_(()=>b(t.currentTime)),C=_(()=>b(t.duration)),M=async d=>{try{const w=await(await fetch(`/api/episodes/${d.id}/stream`)).json();return w.stream_url?w.stream_url:d.url}catch(h){return console.warn("Failed to get streaming URL, using direct URL:",h),d.url}},j=async d=>{o.value&&(o.value.pause(),o.value.src=""),t.isLoading=!0,t.error=null;try{const h=await M(d);o.value=new Audio,o.value.preload="metadata",o.value.crossOrigin="anonymous",E(),o.value.src=h,o.value.volume=t.volume/100}catch(h){t.error="Failed to initialize audio streaming",t.isLoading=!1,console.error("Audio initialization error:",h)}},E=()=>{o.value&&(o.value.addEventListener("loadstart",()=>{t.isLoading=!0,t.error=null}),o.value.addEventListener("loadedmetadata",()=>{t.duration=o.value?.duration||0,t.canSeek=!0,t.isLoading=!1}),o.value.addEventListener("timeupdate",()=>{t.currentTime=o.value?.currentTime||0}),o.value.addEventListener("progress",()=>{if(o.value&&o.value.buffered.length>0){const d=o.value.buffered.end(o.value.buffered.length-1);t.buffered=d/t.duration*100}}),o.value.addEventListener("canplay",()=>{t.isLoading=!1,t.canSeek=!0}),o.value.addEventListener("canplaythrough",()=>{t.isLoading=!1}),o.value.addEventListener("play",()=>{t.isPlaying=!0}),o.value.addEventListener("pause",()=>{t.isPlaying=!1}),o.value.addEventListener("ended",()=>{t.isPlaying=!1,t.currentTime=0}),o.value.addEventListener("error",d=>{t.error="Failed to load or stream audio file",t.isLoading=!1,t.isPlaying=!1,console.error("Audio streaming error:",d)}),o.value.addEventListener("waiting",()=>{t.isLoading=!0}),o.value.addEventListener("seeking",()=>{t.isLoading=!0}),o.value.addEventListener("seeked",()=>{t.isLoading=!1}),o.value.addEventListener("stalled",()=>{console.log("Audio streaming stalled")}),o.value.addEventListener("suspend",()=>{console.log("Audio streaming suspended")}))},c=async()=>{if(o.value)try{await o.value.play()}catch(d){t.error="Failed to play audio stream",console.error("Audio play error:",d)}},V=()=>{o.value&&o.value.pause()},k=()=>{t.isPlaying?V():c()},S=d=>{if(!o.value||!t.canSeek)return;const h=Math.max(0,Math.min(d,t.duration));o.value.currentTime=h},z=d=>{if(!o.value||t.duration===0||!t.canSeek)return;const h=d/100*t.duration;S(h)},l=d=>{t.volume=Math.max(0,Math.min(100,d)),o.value&&(o.value.volume=t.volume/100)},r=()=>{o.value&&(o.value.muted=!o.value.muted)},b=d=>{if(isNaN(d)||d<0)return"0:00";const h=Math.floor(d/3600),w=Math.floor(d%3600/60),W=Math.floor(d%60);return h>0?`${h}:${w.toString().padStart(2,"0")}:${W.toString().padStart(2,"0")}`:`${w}:${W.toString().padStart(2,"0")}`},p=()=>{o.value&&(o.value.pause(),o.value.src="",o.value=null)};return te(()=>{p()}),{audioState:t,progress:$,formattedCurrentTime:f,formattedDuration:C,initAudio:j,play:c,pause:V,togglePlay:k,seek:S,seekToPercentage:z,setVolume:l,mute:r,cleanup:p,getStreamingUrl:M}}const ve={class:"audio-player mx-auto max-w-2xl rounded-lg border border-gray-200 bg-white p-6 shadow-md"},fe={class:"episode-header mb-4"},me={class:"mb-1 text-lg font-semibold text-gray-900"},pe={key:0,class:"text-sm text-gray-600"},he={class:"audio-controls mb-4 flex items-center space-x-4"},ye=["disabled","aria-label","aria-pressed"],be={key:0,class:"h-6 w-6 animate-spin",fill:"none",viewBox:"0 0 24 24"},xe={key:1,class:"ml-1 h-6 w-6",fill:"currentColor",viewBox:"0 0 24 24"},we={key:2,class:"h-6 w-6",fill:"currentColor",viewBox:"0 0 24 24"},_e=["disabled"],Ce=["disabled"],$e={class:"waveform-section mb-4"},ke=["aria-valuenow","aria-valuemax"],Me={class:"waveform-bars flex h-20 items-end justify-between space-x-1"},Le={key:0,class:"hover-fill absolute bottom-0 left-0 w-full bg-gradient-to-t from-orange-300 to-orange-200 opacity-60 transition-opacity duration-200",style:{height:"100%"}},Ee={key:0,class:"play-overlay bg-opacity-20 absolute inset-0 flex items-center justify-center bg-black opacity-0 transition-opacity duration-300 group-hover:opacity-100"},Se={key:1,class:"loading-overlay bg-opacity-80 absolute inset-0 flex items-center justify-center rounded-lg bg-white"},ze={class:"flex space-x-1"},Pe={class:"time-display absolute right-4 bottom-1 left-4 flex justify-between text-xs text-gray-600"},Be={class:"bg-opacity-90 rounded bg-white px-2 py-1 shadow-sm"},Te={class:"bg-opacity-90 rounded bg-white px-2 py-1 shadow-sm"},je={class:"volume-section mb-6 flex items-center space-x-3"},Ve={key:0,class:"h-5 w-5",fill:"currentColor",viewBox:"0 0 24 24"},Ae={key:1,class:"h-5 w-5",fill:"currentColor",viewBox:"0 0 24 24"},He={key:2,class:"h-5 w-5",fill:"currentColor",viewBox:"0 0 24 24"},De={class:"volume-slider max-w-24 flex-1"},Ne=["value"],Ie={class:"w-8 text-right text-xs text-gray-500"},We={class:"embed-section border-t border-gray-200 pt-4"},Xe=["disabled"],Fe=["value"],Ue={key:1,class:"error-message mt-4 rounded-md border border-red-200 bg-red-50 p-3"},Re={class:"text-sm text-red-600"},X=120,Ge=oe({__name:"AudioPlayer",props:{episode:{default:null},episodes:{default:()=>[]}},emits:["episodeChange"],setup(D,{emit:o}){const t=D,$=o,{audioState:f,progress:C,formattedCurrentTime:M,formattedDuration:j,initAudio:E,togglePlay:c,seekToPercentage:V,setVolume:k,mute:S}=ge(),z=T(!1),l=T(""),r=T(),b=T(),p=T(-1),d=_(()=>{if(!b.value)return 3;const g=b.value.offsetWidth-32;return Math.max(2,Math.floor((g-(X-1)*4)/X))}),h=_(()=>{const g=[];for(let i=0;i<X;i++){const L=30+Math.sin(i*.1)*25,P=Math.sin(i*.3)*30+Math.cos(i*.2)*25,ie=(Math.random()-.5)*40,le=Math.max(20,Math.min(100,L+P+ie));g.push({height:le})}return g}),w=_(()=>Math.floor(C.value/100*X)),W=_(()=>{const g=C.value/100*X;return(g-Math.floor(g))*100}),A=_(()=>!t.episode||!t.episodes.length?-1:t.episodes.findIndex(g=>g.id===t.episode?.id)),K=_(()=>A.value>0),Q=_(()=>A.value<t.episodes.length-1&&A.value!==-1);de(()=>t.episode,g=>{g&&E(g)},{immediate:!0});const Y=g=>{if(!b.value||f.duration===0)return;const i=b.value.getBoundingClientRect(),P=(g.clientX-i.left)/i.width*100;V(Math.max(0,Math.min(100,P)))},s=g=>{if(!b.value)return;const i=b.value.getBoundingClientRect(),P=(g.clientX-i.left)/i.width*100;p.value=Math.floor(P/100*X)},a=()=>{p.value=-1},n=g=>{const i=g.target;k(parseInt(i.value))},u=()=>{if(K.value&&t.episodes.length>0){const g=t.episodes[A.value-1];$("episodeChange",g)}},H=()=>{if(Q.value&&t.episodes.length>0){const g=t.episodes[A.value+1];$("episodeChange",g)}},I=async()=>{if(t.episode)try{const i=await(await fetch(`/api/embed/${t.episode.id}/code`)).json();l.value=i.embedCode,z.value=!0}catch(g){console.error("Failed to generate embed code:",g)}},N=()=>{z.value=!1},U=async()=>{if(r.value)try{await navigator.clipboard.writeText(l.value),N()}catch{r.value.select(),document.execCommand("copy"),N()}},ne=g=>new Date(g).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}),ae=()=>{b.value&&(b.value.style.width=b.value.style.width)};return re(()=>{window.addEventListener("resize",ae)}),te(()=>{window.removeEventListener("resize",ae)}),(g,i)=>(v(),m("div",ve,[e("div",fe,[e("h3",me,x(g.episode?.title||"No episode selected"),1),g.episode?(v(),m("p",pe,x(ne(g.episode.published_date)),1)):B("",!0)]),e("div",he,[e("button",{onClick:i[0]||(i[0]=(...L)=>y(c)&&y(c)(...L)),disabled:!g.episode||y(f).isLoading,class:"play-pause-btn flex h-12 w-12 transform items-center justify-center rounded-full bg-gradient-to-r from-orange-500 to-orange-600 text-white shadow-lg transition-all duration-300 hover:scale-110 hover:from-orange-600 hover:to-orange-700 hover:shadow-xl focus:ring-2 focus:ring-orange-500 focus:ring-offset-2 focus:outline-none disabled:from-gray-400 disabled:to-gray-500","aria-label":y(f).isPlaying?"Pause episode":"Play episode","aria-pressed":y(f).isPlaying},[y(f).isLoading?(v(),m("svg",be,i[3]||(i[3]=[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)]))):y(f).isPlaying?(v(),m("svg",we,i[5]||(i[5]=[e("path",{d:"M6 19h4V5H6v14zm8-14v14h4V5h-4z"},null,-1)]))):(v(),m("svg",xe,i[4]||(i[4]=[e("path",{d:"M8 5v14l11-7z"},null,-1)])))],8,ye),e("button",{onClick:u,disabled:!K.value,class:"previous-btn flex h-10 w-10 items-center justify-center rounded-full bg-gray-100 text-gray-600 transition-colors hover:bg-gray-200 focus:ring-2 focus:ring-gray-400 focus:ring-offset-2 focus:outline-none disabled:bg-gray-50 disabled:text-gray-300","aria-label":"Previous episode"},i[6]||(i[6]=[e("svg",{class:"h-5 w-5",fill:"currentColor",viewBox:"0 0 24 24"},[e("path",{d:"M6 6h2v12H6zm3.5 6l8.5 6V6z"})],-1)]),8,_e),e("button",{onClick:H,disabled:!Q.value,class:"next-btn flex h-10 w-10 items-center justify-center rounded-full bg-gray-100 text-gray-600 transition-colors hover:bg-gray-200 focus:ring-2 focus:ring-gray-400 focus:ring-offset-2 focus:outline-none disabled:bg-gray-50 disabled:text-gray-300","aria-label":"Next episode"},i[7]||(i[7]=[e("svg",{class:"h-5 w-5",fill:"currentColor",viewBox:"0 0 24 24"},[e("path",{d:"M6 18l8.5-6L6 6v12zM16 6v12h2V6h-2z"})],-1)]),8,Ce)]),e("div",$e,[e("div",{ref_key:"waveformContainer",ref:b,onClick:Y,onMousemove:s,onMouseleave:a,class:G(["waveform-container group relative cursor-pointer overflow-hidden rounded-lg bg-gradient-to-r from-gray-100 to-gray-50 p-4",{playing:y(f).isPlaying}]),role:"slider","aria-valuenow":y(f).currentTime,"aria-valuemin":0,"aria-valuemax":y(f).duration,"aria-label":"Audio waveform - click to seek"},[e("div",Me,[(v(!0),m(O,null,q(h.value,(L,P)=>(v(),m("div",{key:P,class:"waveform-bar relative overflow-hidden rounded-t-sm bg-gray-400 transition-all duration-300 ease-out hover:bg-gray-500",style:J({height:`${L.height}%`,minHeight:"8px",width:`${d.value}px`})},[e("div",{class:G(["progress-fill absolute bottom-0 left-0 w-full transition-all duration-300 ease-out",[P<=w.value?"bg-gradient-to-t from-orange-500 to-orange-400 shadow-sm":"bg-transparent",y(f).isPlaying&&P===w.value?"animate-pulse":""]]),style:J({height:P<w.value?"100%":P===w.value?`${W.value}%`:"0%"})},null,6),p.value>=0&&P<=p.value?(v(),m("div",Le)):B("",!0)],4))),128))]),!y(f).isPlaying&&!y(f).isLoading?(v(),m("div",Ee,i[8]||(i[8]=[e("div",{class:"play-button transform rounded-full bg-orange-500 p-3 text-white shadow-lg transition-all duration-200 hover:scale-110 hover:bg-orange-600"},[e("svg",{class:"ml-1 h-6 w-6",fill:"currentColor",viewBox:"0 0 24 24"},[e("path",{d:"M8 5v14l11-7z"})])],-1)]))):B("",!0),y(f).isLoading?(v(),m("div",Se,[e("div",ze,[(v(),m(O,null,q(5,L=>e("div",{key:L,class:"loading-bar animate-bounce rounded-sm bg-orange-500",style:J({width:"4px",height:`${20+L%3*10}px`,animationDelay:`${L*.1}s`})},null,4)),64))])])):B("",!0),e("div",Pe,[e("span",Be,x(y(M)),1),e("span",Te,x(y(j)),1)])],42,ke)]),e("div",je,[e("button",{onClick:i[1]||(i[1]=(...L)=>y(S)&&y(S)(...L)),class:"volume-icon text-gray-600 transition-colors hover:text-gray-800"},[y(f).volume===0?(v(),m("svg",Ve,i[9]||(i[9]=[e("path",{d:"M16.5 12c0-1.77-1.02-3.29-2.5-4.03v2.21l2.45 2.45c.03-.2.05-.41.05-.63zm2.5 0c0 .94-.2 1.82-.54 2.64l1.51 1.51C20.63 14.91 21 = 19.73l-9-9L4.27 3zM12 4L9.91 6.09 12 8.18V4z"},null,-1)]))):y(f).volume<50?(v(),m("svg",Ae,i[10]||(i[10]=[e("path",{d:"M18.5 12c0-1.77-1.02-3.29-2.5-4.03v8.05c1.48-.73 2.5-2.25 2.5-4.02zM5 9v6h4l5 5V4L9 9H5z"},null,-1)]))):(v(),m("svg",He,i[11]||(i[11]=[e("path",{d:"M3 9v6h4l5 5V4L7 9H3zm13.5 3c0-1.77-1.02-3.29-2.5-4.03v8.05c1.48-.73 2.5-2.25 2.5-4.02zM14 3.23v2.06c2.89.86 5 3.54 5 6.71s-2.11 5.85-5 6.71v2.06c4.01-.91 7-4.49 7-8.77s-2.99-7.86-7-8.77z"},null,-1)])))]),e("div",De,[e("input",{type:"range",min:"0",max:"100",value:y(f).volume,onInput:n,class:"volume-range h-2 w-full cursor-pointer appearance-none rounded-lg bg-gray-200","aria-label":"Volume control"},null,40,Ne)]),e("span",Ie,x(Math.round(y(f).volume)),1)]),e("div",We,[e("button",{onClick:I,disabled:!g.episode,class:"embed-btn rounded-md border border-orange-200 bg-gradient-to-r from-orange-100 to-orange-50 px-4 py-2 text-sm font-medium text-orange-700 transition-colors hover:from-orange-200 hover:to-orange-100 focus:ring-2 focus:ring-orange-400 focus:ring-offset-2 focus:outline-none disabled:bg-gray-50 disabled:text-gray-400"}," Get Embed Code ",8,Xe)]),z.value?(v(),m("div",{key:0,class:"bg-opacity-50 fixed inset-0 z-50 flex items-center justify-center bg-black",onClick:N},[e("div",{class:"mx-4 w-full max-w-md rounded-lg bg-white p-6",onClick:i[2]||(i[2]=R(()=>{},["stop"]))},[i[12]||(i[12]=e("h3",{class:"mb-4 text-lg font-semibold"},"Embed Code",-1)),i[13]||(i[13]=e("p",{class:"mb-3 text-sm text-gray-600"}," Copy this code to embed the audio player on your website: ",-1)),e("textarea",{ref_key:"embedCodeTextarea",ref:r,value:l.value,readonly:"",class:"h-24 w-full resize-none rounded-md border border-gray-300 bg-gray-50 p-3 font-mono text-sm"},null,8,Fe),e("div",{class:"mt-4 flex justify-end space-x-3"},[e("button",{onClick:N,class:"px-4 py-2 text-gray-600 transition-colors hover:text-gray-800"}," Cancel "),e("button",{onClick:U,class:"rounded-md bg-gradient-to-r from-orange-500 to-orange-600 px-4 py-2 text-white shadow-md transition-colors hover:from-orange-600 hover:to-orange-700 hover:shadow-lg"}," Copy Code ")])])])):B("",!0),y(f).error?(v(),m("div",Ue,[e("p",Re,x(y(f).error),1)])):B("",!0)]))}}),se=(D,o)=>{const t=D.__vccOpts||D;for(const[$,f]of o)t[$]=f;return t},Oe=se(Ge,[["__scopeId","data-v-d5608ed5"]]),qe={class:"episode-list"},Je={class:"list-header mb-8 text-center"},Ke={class:"text-lg text-gray-600"},Qe={class:"episodes-grid space-y-6"},Ye={class:"episode-content p-6"},Ze={class:"flex items-start space-x-6"},et=["onClick","disabled","aria-label"],tt={key:0,class:"h-8 w-8",fill:"currentColor",viewBox:"0 0 24 24"},ot={key:1,class:"ml-1 h-8 w-8 transition-all duration-200 group-hover:ml-2",fill:"currentColor",viewBox:"0 0 24 24"},st={class:"episode-info min-w-0 flex-1"},at={class:"mb-3 flex items-start justify-between"},rt={class:"min-w-0 flex-1"},nt=["onClick"],it={class:"episode-meta flex flex-wrap items-center gap-x-4 gap-y-2 text-sm text-gray-500"},lt={class:"flex items-center gap-1.5 rounded-full bg-gray-100 px-3 py-1"},dt={class:"flex items-center gap-1.5 rounded-full bg-gray-100 px-3 py-1"},ut={class:"ml-4 flex items-center space-x-2"},ct=["onClick","aria-label"],gt=["onClick","aria-label"],vt={class:"waveform-section px-6 pb-6"},ft=["onClick","onMousemove","onMouseleave"],mt={class:"waveform-bars flex h-12 items-end justify-between gap-0.5"},pt=["data-index"],ht={key:0,class:"play-overlay pointer-events-none absolute inset-0 flex items-center justify-center rounded-lg bg-transparent transition-all duration-300"},yt={key:1,class:"loading-overlay bg-opacity-80 absolute inset-0 flex items-center justify-center rounded-lg bg-white"},bt={class:"flex items-end space-x-1"},xt={class:"time-display mt-3 flex items-center justify-between text-xs text-gray-500"},wt={key:0,class:"empty-state py-16 text-center"},_t={class:"mb-4 text-gray-600"},Ct=["value"],$t=oe({__name:"EpisodeList",props:{episodes:{},currentEpisode:{default:null},isPlaying:{type:Boolean,default:!1},progress:{default:0},currentTime:{default:0},duration:{default:0},isLoading:{type:Boolean,default:!1}},emits:["episodeSelect","episodePlay"],setup(D,{emit:o}){const t=D,$=o,f=_(()=>[...t.episodes].sort((s,a)=>a.id-s.id)),C=T(!1),M=T(""),j=T(null),E=T(),c=ee({}),V=s=>{if(!c[s.id]){const a=[];for(let u=0;u<60;u++){const H=25+Math.sin(u*.15)*20,I=Math.sin(u*.4)*25+Math.cos(u*.3)*20,N=(Math.random()-.5)*30,U=Math.max(15,Math.min(85,H+I+N));a.push({height:U})}c[s.id]={bars:a,hoverIndex:-1}}},k=s=>(V(s),c[s.id].bars),S=(s,a)=>{if(t.currentEpisode?.id!==s.id||!t.progress)return!1;const n=k(s).length,u=Math.floor(t.progress/100*n);return a<=u},z=(s,a)=>{if(t.currentEpisode?.id!==s.id||!t.isPlaying)return!1;const n=k(s).length,u=Math.floor(t.progress/100*n);return a===u},l=(s,a)=>{if(!c[s.id])return!1;const n=c[s.id].hoverIndex;return n>=0&&a<=n&&!S(s,a)},r=(s,a)=>{if(t.currentEpisode?.id!==s.id){$("episodePlay",s);return}const u=a.currentTarget.getBoundingClientRect(),I=(a.clientX-u.left)/u.width*100;console.log(`Seeking to ${I}% in episode ${s.id}`)},b=(s,a)=>{V(s);const u=a.currentTarget.getBoundingClientRect(),I=(a.clientX-u.left)/u.width*100,N=k(s).length,U=Math.floor(I/100*N);c[s.id].hoverIndex=U},p=s=>{c[s.id]&&(c[s.id].hoverIndex=-1)},d=s=>{$("episodeSelect",s)},h=s=>{$("episodePlay",s)},w=s=>{navigator.share?navigator.share({title:s.title,text:`Listen to ${s.title}`,url:window.location.href}):navigator.clipboard.writeText(window.location.href)},W=async s=>{j.value=s;try{const n=await(await fetch(`/api/embed/${s.id}/code`)).json();M.value=n.embedCode,C.value=!0}catch(a){console.error("Failed to generate embed code:",a),M.value=`<iframe src="${window.location.origin}/embed/${s.id}" width="100%" height="120" frameborder="0" allow="autoplay"></iframe>`,C.value=!0}},A=()=>{C.value=!1,j.value=null},K=async()=>{if(E.value)try{await navigator.clipboard.writeText(M.value),A()}catch{E.value.select(),document.execCommand("copy"),A()}},Q=s=>new Date(s).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}),Y=s=>{if(isNaN(s)||s<0)return"0:00";const a=Math.floor(s/3600),n=Math.floor(s%3600/60),u=Math.floor(s%60);return a>0?`${a}:${n.toString().padStart(2,"0")}:${u.toString().padStart(2,"0")}`:`${n}:${u.toString().padStart(2,"0")}`};return(s,a)=>(v(),m("div",qe,[e("div",Je,[a[1]||(a[1]=e("h1",{class:"mb-2 flex items-center justify-center gap-3 text-3xl font-bold text-gray-900"},[e("div",{class:"flex h-10 w-10 items-center justify-center rounded-lg bg-gradient-to-r from-orange-500 to-orange-600"},[e("span",{class:"text-xl text-white"},"📻")]),F(" Madhu Sudhan Subedi Tech Weekly ")],-1)),e("p",Ke,x(s.episodes.length)+" episodes available ",1)]),e("div",Qe,[(v(!0),m(O,null,q(f.value,n=>(v(),m("div",{key:n.id,class:G(["episode-card transform overflow-hidden rounded-xl border border-gray-100 bg-white shadow-lg transition-all duration-300 hover:-translate-y-1 hover:shadow-2xl",{"translate-y-0 bg-gradient-to-r from-orange-50 to-white shadow-2xl ring-2 ring-orange-400":s.currentEpisode?.id===n.id,"hover:ring-1 hover:ring-orange-200":s.currentEpisode?.id!==n.id}])},[e("div",Ye,[e("div",Ze,[e("button",{onClick:R(u=>h(n),["stop"]),class:G(["play-btn group flex h-16 w-16 transform items-center justify-center rounded-full bg-gradient-to-r from-orange-500 to-orange-600 text-white shadow-xl transition-all duration-300 hover:scale-105 hover:from-orange-600 hover:to-orange-700 hover:shadow-2xl focus:ring-4 focus:ring-orange-200 focus:outline-none",{"scale-105 animate-pulse from-orange-600 to-orange-700 shadow-2xl":s.currentEpisode?.id===n.id&&s.isPlaying,"from-gray-400 to-gray-500":!n.url}]),disabled:!n.url,"aria-label":`Play ${n.title}`},[s.currentEpisode?.id===n.id&&s.isPlaying?(v(),m("svg",tt,a[2]||(a[2]=[e("path",{d:"M6 19h4V5H6v14zm8-14v14h4V5h-4z"},null,-1)]))):(v(),m("svg",ot,a[3]||(a[3]=[e("path",{d:"M8 5v14l11-7z"},null,-1)])))],10,et),e("div",st,[e("div",at,[e("div",rt,[e("h3",{class:"episode-title mb-2 line-clamp-2 cursor-pointer text-xl font-bold text-gray-900 transition-colors hover:text-orange-600",onClick:u=>d(n)},x(n.title),9,nt),e("div",it,[e("span",lt,[a[4]||(a[4]=e("svg",{class:"h-4 w-4 text-orange-500",fill:"currentColor",viewBox:"0 0 24 24"},[e("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"})],-1)),F(" "+x(n.duration),1)]),e("span",dt,[a[5]||(a[5]=e("svg",{class:"h-4 w-4 text-orange-500",fill:"currentColor",viewBox:"0 0 24 24"},[e("path",{d:"M9 11H7v6h2v-6zm4 0h-2v6h2v-6zm4 0h-2v6h2v-6zm2-7H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zM5 20V6h14v14H5z"})],-1)),F(" "+x(Q(n.published_date)),1)])])]),e("div",ut,[e("button",{onClick:R(u=>W(n),["stop"]),class:"action-btn group rounded-full p-3 text-gray-400 transition-all duration-200 hover:bg-orange-50 hover:text-orange-500 focus:ring-2 focus:ring-orange-200 focus:outline-none","aria-label":`Get embed code for ${n.title}`,title:"Get embed code"},a[6]||(a[6]=[e("svg",{class:"h-5 w-5 transition-transform group-hover:scale-110",fill:"currentColor",viewBox:"0 0 24 24"},[e("path",{d:"M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z"})],-1)]),8,ct),e("button",{onClick:R(u=>w(n),["stop"]),class:"action-btn group rounded-full p-3 text-gray-400 transition-all duration-200 hover:bg-orange-50 hover:text-orange-500 focus:ring-2 focus:ring-orange-200 focus:outline-none","aria-label":`Share ${n.title}`,title:"Share episode"},a[7]||(a[7]=[e("svg",{class:"h-5 w-5 transition-transform group-hover:scale-110",fill:"currentColor",viewBox:"0 0 24 24"},[e("path",{d:"M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81 1.66 0 3-1.34 3-3s-1.34-3-3-3-3 1.34-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9c-1.66 0-3 1.34-3 3s1.34 3 3 3c.79 0 1.50-.31 2.04-.81l7.12 4.16c-.05.21-.08.43-.08.65 0 1.61 1.31 2.92 2.92 2.92s2.92-1.31 2.92-2.92-1.31-2.92-2.92-2.92z"})],-1)]),8,gt)])])])])]),e("div",vt,[e("div",{class:"waveform-container group relative cursor-pointer rounded-lg bg-gray-50 p-4 transition-colors hover:bg-gray-100",onClick:u=>r(n,u),onMousemove:u=>b(n,u),onMouseleave:u=>p(n)},[e("div",mt,[(v(!0),m(O,null,q(k(n),(u,H)=>(v(),m("div",{key:H,class:G(["waveform-bar rounded-sm bg-gray-300 transition-all duration-200 hover:bg-orange-300",{"bg-gradient-to-t from-orange-500 to-orange-400":S(n,H),"animate-pulse bg-gradient-to-t from-orange-600 to-orange-500":z(n,H),"bg-orange-200":l(n,H)}]),style:J({height:`${u.height}%`,width:"2px",minHeight:"6px"}),"data-index":H},null,14,pt))),128))]),s.currentEpisode?.id!==n.id?(v(),m("div",ht,a[8]||(a[8]=[e("div",{class:"play-button bg-opacity-0 group-hover:bg-opacity-90 flex h-12 w-12 scale-0 transform items-center justify-center rounded-full bg-white shadow-lg transition-all duration-300 group-hover:scale-100"},[e("svg",{class:"ml-0.5 h-6 w-6 text-orange-500",fill:"currentColor",viewBox:"0 0 24 24"},[e("path",{d:"M8 5v14l11-7z"})])],-1)]))):B("",!0),s.currentEpisode?.id===n.id&&s.isLoading?(v(),m("div",yt,[e("div",bt,[(v(),m(O,null,q(5,u=>e("div",{key:u,class:"loading-bar w-1 animate-bounce rounded-sm bg-orange-500",style:J({height:"20px",animationDelay:`${u*.1}s`})},null,4)),64))])])):B("",!0),e("div",xt,[e("span",null,x(s.currentEpisode?.id===n.id?Y(s.currentTime):"0:00"),1),e("span",null,x(n.duration),1)])],40,ft)])],2))),128))]),s.episodes.length===0?(v(),m("div",wt,a[9]||(a[9]=[e("div",{class:"mx-auto mb-6 flex h-24 w-24 items-center justify-center rounded-full bg-gradient-to-r from-orange-500 to-orange-600"},[e("span",{class:"text-4xl"},"🎵")],-1),e("h3",{class:"mb-3 text-2xl font-bold text-gray-900"}," No episodes available ",-1),e("p",{class:"text-lg text-gray-600"}," Check back later for new episodes! ",-1)]))):B("",!0),C.value?(v(),m("div",{key:1,class:"bg-opacity-50 fixed inset-0 z-50 flex items-center justify-center bg-black p-4",onClick:A},[e("div",{class:"w-full max-w-lg rounded-xl bg-white p-8 shadow-2xl",onClick:a[0]||(a[0]=R(()=>{},["stop"]))},[e("div",{class:"mb-6 flex items-center justify-between"},[a[11]||(a[11]=e("h3",{class:"text-2xl font-bold text-gray-900"},"Embed Code",-1)),e("button",{onClick:A,class:"text-gray-400 transition-colors hover:text-gray-600"},a[10]||(a[10]=[e("svg",{class:"h-6 w-6",fill:"currentColor",viewBox:"0 0 24 24"},[e("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"})],-1)]))]),e("p",_t,[a[12]||(a[12]=F(' Copy this code to embed "',-1)),e("strong",null,x(j.value?.title),1),a[13]||(a[13]=F('" on your website: ',-1))]),e("textarea",{ref_key:"embedCodeTextarea",ref:E,value:M.value,readonly:"",class:"h-32 w-full resize-none rounded-lg border border-gray-300 bg-gray-50 p-4 font-mono text-sm focus:border-orange-500 focus:ring-2 focus:ring-orange-500 focus:outline-none"},null,8,Ct),e("div",{class:"mt-6 flex justify-end space-x-3"},[e("button",{onClick:A,class:"rounded-lg px-6 py-3 font-medium text-gray-600 transition-colors hover:text-gray-800 focus:ring-2 focus:ring-gray-400 focus:ring-offset-2 focus:outline-none"}," Cancel "),e("button",{onClick:K,class:"rounded-lg bg-gradient-to-r from-orange-500 to-orange-600 px-6 py-3 font-medium text-white shadow-lg transition-all duration-200 hover:from-orange-600 hover:to-orange-700 hover:shadow-xl focus:ring-2 focus:ring-orange-500 focus:ring-offset-2 focus:outline-none"}," Copy Code ")])])])):B("",!0)]))}}),kt=se($t,[["__scopeId","data-v-986d6b4a"]]);function Mt(D){const o=T(null),t=ee({isPlaying:!1,currentTime:0,duration:0,volume:80,isLoading:!1,error:null,buffered:0}),$=_(()=>t.duration===0?0:t.currentTime/t.duration*100),f=_(()=>r(t.currentTime)),C=_(()=>r(t.duration)),M=p=>{o.value&&(o.value.pause(),o.value.src=""),o.value=new Audio(p.url),o.value.preload="none",o.value.crossOrigin="anonymous",j(),o.value.volume=t.volume/100},j=()=>{o.value&&(o.value.addEventListener("loadstart",()=>{t.isLoading=!0,t.error=null}),o.value.addEventListener("loadedmetadata",()=>{t.duration=o.value?.duration||0,t.isLoading=!1}),o.value.addEventListener("timeupdate",()=>{t.currentTime=o.value?.currentTime||0}),o.value.addEventListener("progress",()=>{if(o.value&&o.value.buffered.length>0){const p=o.value.buffered.end(o.value.buffered.length-1);t.buffered=p/t.duration*100}}),o.value.addEventListener("play",()=>{t.isPlaying=!0}),o.value.addEventListener("pause",()=>{t.isPlaying=!1}),o.value.addEventListener("ended",()=>{t.isPlaying=!1,t.currentTime=0}),o.value.addEventListener("error",()=>{t.error="Failed to load audio file",t.isLoading=!1,t.isPlaying=!1}),o.value.addEventListener("waiting",()=>{t.isLoading=!0}),o.value.addEventListener("canplay",()=>{t.isLoading=!1}))},E=async()=>{if(o.value)try{await o.value.play()}catch(p){t.error="Failed to play audio",console.error("Audio play error:",p)}},c=()=>{o.value&&o.value.pause()},V=()=>{t.isPlaying?c():E()},k=p=>{o.value&&(o.value.currentTime=p)},S=p=>{if(!o.value||t.duration===0)return;const d=p/100*t.duration;k(d)},z=p=>{t.volume=Math.max(0,Math.min(100,p)),o.value&&(o.value.volume=t.volume/100)},l=()=>{o.value&&(o.value.muted=!o.value.muted)},r=p=>{if(isNaN(p)||p<0)return"0:00";const d=Math.floor(p/3600),h=Math.floor(p%3600/60),w=Math.floor(p%60);return d>0?`${d}:${h.toString().padStart(2,"0")}:${w.toString().padStart(2,"0")}`:`${h}:${w.toString().padStart(2,"0")}`},b=()=>{o.value&&(o.value.pause(),o.value.src="",o.value=null)};return te(()=>{b()}),{audioState:t,progress:$,formattedCurrentTime:f,formattedDuration:C,initAudio:M,play:E,pause:c,togglePlay:V,seek:k,seekToPercentage:S,setVolume:z,mute:l,formatTime:r,cleanup:b}}const Lt={class:"home-page min-h-screen bg-gradient-to-br from-blue-50 via-white to-purple-50"},Et={class:"border-b border-gray-200 bg-white shadow-sm"},St={class:"mx-auto max-w-7xl px-4 py-4 sm:px-6 lg:px-8"},zt={class:"flex items-center justify-between"},Pt={class:"hidden items-center space-x-6 text-sm text-gray-600 sm:flex"},Bt={class:"flex items-center space-x-1"},Tt={class:"mx-auto max-w-7xl px-4 py-8 sm:px-6 lg:px-8"},jt={class:"grid grid-cols-1 gap-8 lg:grid-cols-3"},Vt={class:"lg:col-span-2"},At={class:"lg:col-span-1"},Ht={class:"sticky top-8"},Dt={key:0,class:"mb-6 rounded-lg border border-gray-200 bg-white p-6 shadow-sm"},Nt={class:"mb-4 flex items-center space-x-3"},It={class:"min-w-0 flex-1"},Wt={class:"truncate font-medium text-gray-900"},Xt={class:"text-sm text-gray-600"},Ft={class:"flex items-center justify-between border-t border-gray-100 pt-3 text-xs text-gray-500"},Ut={key:2,class:"rounded-lg border border-gray-200 bg-white p-6 text-center shadow-sm"},Rt={class:"mt-6 rounded-lg border border-gray-200 bg-white p-6 shadow-sm"},Gt={class:"space-y-3"},Ot={class:"flex items-center justify-between"},qt={class:"font-semibold text-gray-900"},Jt={class:"flex items-center justify-between"},Kt={class:"font-semibold text-gray-900"},Qt={class:"flex items-center justify-between"},Yt={class:"font-semibold text-gray-900"},Zt=oe({__name:"Home",props:{episodes:{}},setup(D){const o=D,{audioState:t,progress:$,initAudio:f,play:C,pause:M}=Mt(),j=_(()=>{const l=o.episodes.reduce((p,d)=>{const h=d.duration.split(":").map(Number);let w=0;return h.length===2?w=h[0]*60+h[1]:h.length===3&&(w=h[0]*3600+h[1]*60+h[2]),p+w},0),r=Math.floor(l/3600),b=Math.floor(l%3600/60);return r>0?`${r}h ${b}m`:`${b}m`}),E=_(()=>{if(o.episodes.length===0)return"N/A";const l=o.episodes.reduce((r,b)=>new Date(b.published_date)>new Date(r.published_date)?b:r);return z(l.published_date)}),c=T(null),V=l=>{c.value?.id!==l.id&&(c.value=l,f(l))},k=l=>{c.value?.id===l.id?t.isPlaying?M():C():(c.value=l,f(l),setTimeout(()=>{C()},100))},S=l=>{c.value=l,f(l),setTimeout(()=>{C()},100)},z=l=>new Date(l).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"});return re(()=>{o.episodes.length>0&&(c.value=o.episodes[0],f(o.episodes[0]))}),(l,r)=>(v(),m("div",Lt,[e("header",Et,[e("div",St,[e("div",zt,[r[3]||(r[3]=Z('<div class="flex items-center space-x-3" data-v-9fe9f5a4><div class="flex h-10 w-10 items-center justify-center rounded-lg bg-gradient-to-r from-blue-600 to-purple-600" data-v-9fe9f5a4><span class="text-xl font-bold text-white" data-v-9fe9f5a4>📻</span></div><div data-v-9fe9f5a4><h1 class="text-xl font-bold text-gray-900" data-v-9fe9f5a4> Tech Weekly Podcast </h1><p class="text-sm text-gray-600" data-v-9fe9f5a4> by Madhu Sudhan Subedi </p></div></div>',1)),e("div",Pt,[e("div",Bt,[r[1]||(r[1]=e("svg",{class:"h-4 w-4",fill:"currentColor",viewBox:"0 0 24 24"},[e("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"})],-1)),e("span",null,x(l.episodes.length)+" Episodes",1)]),r[2]||(r[2]=e("div",{class:"flex items-center space-x-1"},[e("svg",{class:"h-4 w-4",fill:"currentColor",viewBox:"0 0 24 24"},[e("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})]),e("span",null,"Tech & Programming")],-1))])])])]),e("main",Tt,[e("div",jt,[e("div",Vt,[ue(kt,{episodes:l.episodes,"current-episode":c.value,"is-playing":y(t).isPlaying,progress:y($),"current-time":y(t).currentTime,duration:y(t).duration,onEpisodeSelect:V,onEpisodePlay:k},null,8,["episodes","current-episode","is-playing","progress","current-time","duration"])]),e("div",At,[e("div",Ht,[c.value?(v(),m("div",Dt,[r[5]||(r[5]=e("h2",{class:"mb-2 text-lg font-semibold text-gray-900"}," Now Playing ",-1)),e("div",Nt,[r[4]||(r[4]=e("div",{class:"flex h-12 w-12 flex-shrink-0 items-center justify-center rounded-lg bg-gradient-to-r from-blue-600 to-purple-600"},[e("svg",{class:"h-6 w-6 text-white",fill:"currentColor",viewBox:"0 0 24 24"},[e("path",{d:"M12 3v10.55c-.59-.34-1.27-.55-2-.55-2.21 0-4 1.79-4 4s1.79 4 4 4 4-1.79 4-4V7h4V3h-6z"})])],-1)),e("div",It,[e("h3",Wt,x(c.value.title),1),e("p",Xt,x(z(c.value.published_date)),1)])]),e("div",Ft,[e("span",null,x(c.value.duration),1),e("span",null,x(c.value.file_size),1),e("span",null,x(c.value.format.toUpperCase()),1)])])):B("",!0),c.value?(v(),ce(Oe,{key:1,episode:c.value,episodes:l.episodes,onEpisodeChange:S},null,8,["episode","episodes"])):(v(),m("div",Ut,[r[7]||(r[7]=Z('<div class="mx-auto mb-4 flex h-16 w-16 items-center justify-center rounded-full bg-gradient-to-r from-blue-600 to-purple-600" data-v-9fe9f5a4><svg class="h-8 w-8 text-white" fill="currentColor" viewBox="0 0 24 24" data-v-9fe9f5a4><path d="M12 3v10.55c-.59-.34-1.27-.55-2-.55-2.21 0-4 1.79-4 4s1.79 4 4 4 4-1.79 4-4V7h4V3h-6z" data-v-9fe9f5a4></path></svg></div><h3 class="mb-2 text-lg font-semibold text-gray-900" data-v-9fe9f5a4> Welcome to Tech Weekly </h3><p class="mb-4 text-gray-600" data-v-9fe9f5a4> Select an episode from the list to start listening to insightful discussions about technology and programming. </p>',3)),l.episodes.length>0?(v(),m("button",{key:0,onClick:r[0]||(r[0]=b=>k(l.episodes[0])),class:"inline-flex items-center rounded-md bg-blue-600 px-4 py-2 text-white transition-colors hover:bg-blue-700 focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 focus:outline-none"},r[6]||(r[6]=[e("svg",{class:"mr-2 h-4 w-4",fill:"currentColor",viewBox:"0 0 24 24"},[e("path",{d:"M8 5v14l11-7z"})],-1),F(" Play Latest Episode ",-1)]))):B("",!0)])),e("div",Rt,[r[11]||(r[11]=e("h3",{class:"mb-4 text-lg font-semibold text-gray-900"}," Podcast Stats ",-1)),e("div",Gt,[e("div",Ot,[r[8]||(r[8]=e("span",{class:"text-gray-600"},"Total Episodes",-1)),e("span",qt,x(l.episodes.length),1)]),e("div",Jt,[r[9]||(r[9]=e("span",{class:"text-gray-600"},"Total Duration",-1)),e("span",Kt,x(j.value),1)]),e("div",Qt,[r[10]||(r[10]=e("span",{class:"text-gray-600"},"Latest Episode",-1)),e("span",Yt,x(E.value),1)])])])])])])]),r[12]||(r[12]=Z('<footer class="mt-16 border-t border-gray-200 bg-gray-50" data-v-9fe9f5a4><div class="mx-auto max-w-7xl px-4 py-8 sm:px-6 lg:px-8" data-v-9fe9f5a4><div class="text-center" data-v-9fe9f5a4><p class="mb-2 text-gray-600" data-v-9fe9f5a4> © 2024 Madhu Sudhan Subedi Tech Weekly. All rights reserved. </p><p class="text-sm text-gray-500" data-v-9fe9f5a4> Sharing insights about technology, programming, and software development. </p></div></div></footer>',1))]))}}),to=se(Zt,[["__scopeId","data-v-9fe9f5a4"]]);export{to as default};
