import{d as v,a as c,o as a,B as b,n as w,c as M,u as _,w as l,e as n,i as p,t as S,b as i,F as h,j as F,r as g,p as X,C as H,v as P,g as Y,E as Z,x as V,L as $,M as ee,N as te,m as re,h as oe,y as ae,z as ne}from"./app-DpRlgWJR.js";import{r as se,s as ie,q as le,a as ce,c as de,b as ue,S as pe,H as fe,d as _e,f as ve}from"./Layout-DikdUZo8.js";import{c as C,a as K,B as R,P as ye}from"./index-C7rh1qJW.js";import{_ as y}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{c as x}from"./createLucideIcon-D49Nk1-6.js";import{I as me}from"./InputError-NFE_XHba.js";import{D as ge,a as he,b as be,c as we,d as Ce}from"./DialogTitle-KCPDONi7.js";import{P as xe,a as Se,b as ke}from"./PinInputSlot-ChKHR6kg.js";import{c as Te,r as Fe}from"./useForwardExpose-B1loC1l2.js";import{L as je}from"./loader-circle-sJtD2zfS.js";import{C as Ae}from"./check-BhE4xG8q.js";import{A as De}from"./AppLayout-U7A2K22l.js";import"./index-4Ns3tNZl.js";import"./index-K5MaQZQ4.js";import"./index-DBx8TID2.js";import"./VisuallyHidden-1QkZVyB6.js";import"./useArrowNavigation-C6Y-ieo6.js";import"./VisuallyHiddenInput-XfMIOE4B.js";import"./RovingFocusGroup-DCvUY4Dy.js";/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qe=x("CircleAlertIcon",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Me=x("CopyIcon",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ve=x("EyeOffIcon",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Be=x("EyeIcon",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ee=x("LockKeyholeIcon",[["circle",{cx:"12",cy:"16",r:"1",key:"1au0dj"}],["rect",{x:"3",y:"10",width:"18",height:"12",rx:"2",key:"6s8ecr"}],["path",{d:"M7 10V7a5 5 0 0 1 10 0v3",key:"1pqi11"}]]);/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pe=x("RefreshCwIcon",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Re=x("ScanLineIcon",[["path",{d:"M3 7V5a2 2 0 0 1 2-2h2",key:"aa7l1z"}],["path",{d:"M17 3h2a2 2 0 0 1 2 2v2",key:"4qcy5o"}],["path",{d:"M21 17v2a2 2 0 0 1-2 2h-2",key:"6vwrx8"}],["path",{d:"M7 21H5a2 2 0 0 1-2-2v-2",key:"ioqczr"}],["path",{d:"M7 12h10",key:"b7w52i"}]]);/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oe=x("ShieldBanIcon",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m4.243 5.21 14.39 12.472",key:"1c9a7c"}]]);/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Le=x("ShieldCheckIcon",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]),Ie=v({__name:"Alert",props:{class:{type:null,required:!1},variant:{type:null,required:!1}},setup(r,{expose:t}){t();const e={props:r,get cn(){return C},get alertVariants(){return Je}};return Object.defineProperty(e,"__isScriptSetup",{enumerable:!1,value:!0}),e}});function ze(r,t,o,e,d,u){return a(),c("div",{"data-slot":"alert",class:w(e.cn(e.alertVariants({variant:o.variant}),e.props.class)),role:"alert"},[b(r.$slots,"default")],2)}const He=y(Ie,[["render",ze],["__file","/var/www/resources/js/components/ui/alert/Alert.vue"]]),Ke=v({__name:"AlertDescription",props:{class:{type:null,required:!1}},setup(r,{expose:t}){t();const e={props:r,get cn(){return C}};return Object.defineProperty(e,"__isScriptSetup",{enumerable:!1,value:!0}),e}});function Ne(r,t,o,e,d,u){return a(),c("div",{"data-slot":"alert-description",class:w(e.cn("text-muted-foreground col-start-2 grid justify-items-start gap-1 text-sm [&_p]:leading-relaxed",e.props.class))},[b(r.$slots,"default")],2)}const Qe=y(Ke,[["render",Ne],["__file","/var/www/resources/js/components/ui/alert/AlertDescription.vue"]]),Ue=v({__name:"AlertTitle",props:{class:{type:null,required:!1}},setup(r,{expose:t}){t();const e={props:r,get cn(){return C}};return Object.defineProperty(e,"__isScriptSetup",{enumerable:!1,value:!0}),e}});function Ge(r,t,o,e,d,u){return a(),c("div",{"data-slot":"alert-title",class:w(e.cn("col-start-2 line-clamp-1 min-h-4 font-medium tracking-tight",e.props.class))},[b(r.$slots,"default")],2)}const We=y(Ue,[["render",Ge],["__file","/var/www/resources/js/components/ui/alert/AlertTitle.vue"]]),Je=K("relative w-full rounded-lg border px-4 py-3 text-sm grid has-[>svg]:grid-cols-[calc(var(--spacing)*4)_1fr] grid-cols-[0_1fr] has-[>svg]:gap-x-3 gap-y-0.5 items-start [&>svg]:size-4 [&>svg]:translate-y-0.5 [&>svg]:text-current",{variants:{variant:{default:"bg-card text-card-foreground",destructive:"text-destructive bg-card [&>svg]:text-current *:data-[slot=alert-description]:text-destructive/90"}},defaultVariants:{variant:"default"}}),Xe=v({__name:"AlertError",props:{errors:{type:Array,required:!0},title:{type:String,required:!1,default:"Something went wrong."}},setup(r,{expose:t}){t();const o=r,e=M(()=>Array.from(new Set(o.errors))),d={props:o,uniqueErrors:e,get Alert(){return He},get AlertDescription(){return Qe},get AlertTitle(){return We},get AlertCircle(){return qe}};return Object.defineProperty(d,"__isScriptSetup",{enumerable:!1,value:!0}),d}}),Ye={class:"list-inside list-disc text-sm"};function Ze(r,t,o,e,d,u){return a(),_(e.Alert,{variant:"destructive"},{default:l(()=>[n(e.AlertCircle,{class:"size-4"}),n(e.AlertTitle,null,{default:l(()=>[p(S(o.title),1)]),_:1}),n(e.AlertDescription,null,{default:l(()=>[i("ul",Ye,[(a(!0),c(h,null,F(e.uniqueErrors,(s,f)=>(a(),c("li",{key:f},S(s),1))),128))])]),_:1})]),_:1})}const N=y(Xe,[["render",Ze],["__file","/var/www/resources/js/components/AlertError.vue"]]),$e=v({__name:"Card",props:{class:{type:null,required:!1}},setup(r,{expose:t}){t();const e={props:r,get cn(){return C}};return Object.defineProperty(e,"__isScriptSetup",{enumerable:!1,value:!0}),e}});function et(r,t,o,e,d,u){return a(),c("div",{"data-slot":"card",class:w(e.cn("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",e.props.class))},[b(r.$slots,"default")],2)}const tt=y($e,[["render",et],["__file","/var/www/resources/js/components/ui/card/Card.vue"]]),rt=v({__name:"CardContent",props:{class:{type:null,required:!1}},setup(r,{expose:t}){t();const e={props:r,get cn(){return C}};return Object.defineProperty(e,"__isScriptSetup",{enumerable:!1,value:!0}),e}});function ot(r,t,o,e,d,u){return a(),c("div",{"data-slot":"card-content",class:w(e.cn("px-6",e.props.class))},[b(r.$slots,"default")],2)}const at=y(rt,[["render",ot],["__file","/var/www/resources/js/components/ui/card/CardContent.vue"]]),nt=v({__name:"CardDescription",props:{class:{type:null,required:!1}},setup(r,{expose:t}){t();const e={props:r,get cn(){return C}};return Object.defineProperty(e,"__isScriptSetup",{enumerable:!1,value:!0}),e}});function st(r,t,o,e,d,u){return a(),c("p",{"data-slot":"card-description",class:w(e.cn("text-muted-foreground text-sm",e.props.class))},[b(r.$slots,"default")],2)}const it=y(nt,[["render",st],["__file","/var/www/resources/js/components/ui/card/CardDescription.vue"]]),lt=v({__name:"CardHeader",props:{class:{type:null,required:!1}},setup(r,{expose:t}){t();const e={props:r,get cn(){return C}};return Object.defineProperty(e,"__isScriptSetup",{enumerable:!1,value:!0}),e}});function ct(r,t,o,e,d,u){return a(),c("div",{"data-slot":"card-header",class:w(e.cn("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",e.props.class))},[b(r.$slots,"default")],2)}const dt=y(lt,[["render",ct],["__file","/var/www/resources/js/components/ui/card/CardHeader.vue"]]),ut=v({__name:"CardTitle",props:{class:{type:null,required:!1}},setup(r,{expose:t}){t();const e={props:r,get cn(){return C}};return Object.defineProperty(e,"__isScriptSetup",{enumerable:!1,value:!0}),e}});function pt(r,t,o,e,d,u){return a(),c("h3",{"data-slot":"card-title",class:w(e.cn("leading-none font-semibold",e.props.class))},[b(r.$slots,"default")],2)}const ft=y(ut,[["render",pt],["__file","/var/www/resources/js/components/ui/card/CardTitle.vue"]]),E=async r=>{const t=await fetch(r,{headers:{Accept:"application/json"}});if(!t.ok)throw new Error(`Failed to fetch: ${t.status}`);return t.json()},j=g([]),k=g(null),T=g(null),q=g([]),_t=M(()=>T.value!==null&&k.value!==null),O=()=>{const r=async()=>{try{const{svg:f}=await E(le.url());T.value=f}catch{j.value.push("Failed to fetch QR code"),T.value=null}},t=async()=>{try{const{secretKey:f}=await E(ie.url());k.value=f}catch{j.value.push("Failed to fetch a setup key"),k.value=null}},o=()=>{k.value=null,T.value=null,e()},e=()=>{j.value=[]};return{qrCodeSvg:T,manualSetupKey:k,recoveryCodesList:q,errors:j,hasSetupData:_t,clearSetupData:o,clearErrors:e,clearTwoFactorAuthData:()=>{o(),e(),q.value=[]},fetchQrCode:r,fetchSetupKey:t,fetchSetupData:async()=>{try{e(),await Promise.all([r(),t()])}catch{T.value=null,k.value=null}},fetchRecoveryCodes:async()=>{try{e(),q.value=await E(se.url())}catch{j.value.push("Failed to fetch recovery codes"),q.value=[]}}}},vt=v({__name:"TwoFactorRecoveryCodes",setup(r,{expose:t}){t();const{recoveryCodesList:o,fetchRecoveryCodes:e,errors:d}=O(),u=g(!1),s=g(null),f=async()=>{!u.value&&!o.value.length&&await e(),u.value=!u.value,u.value&&(await H(),s.value?.scrollIntoView({behavior:"smooth"}))};X(async()=>{o.value.length||await e()});const m={recoveryCodesList:o,fetchRecoveryCodes:e,errors:d,isRecoveryCodesVisible:u,recoveryCodeSectionRef:s,toggleRecoveryCodesVisibility:f,AlertError:N,get Button(){return R},get Card(){return tt},get CardContent(){return at},get CardDescription(){return it},get CardHeader(){return dt},get CardTitle(){return ft},get regenerateRecoveryCodes(){return ce},get Form(){return P},get Eye(){return Be},get EyeOff(){return Ve},get LockKeyhole(){return Ee},get RefreshCw(){return Pe}};return Object.defineProperty(m,"__isScriptSetup",{enumerable:!1,value:!0}),m}}),yt={class:"flex flex-col gap-3 select-none sm:flex-row sm:items-center sm:justify-between"},mt={key:0,class:"mt-6"},gt={key:1,class:"mt-3 space-y-3"},ht={ref:"recoveryCodeSectionRef",class:"grid gap-1 rounded-lg bg-muted p-4 font-mono text-sm"},bt={key:0,class:"space-y-2"};function wt(r,t,o,e,d,u){return a(),_(e.Card,{class:"w-full"},{default:l(()=>[n(e.CardHeader,null,{default:l(()=>[n(e.CardTitle,{class:"flex gap-3"},{default:l(()=>[n(e.LockKeyhole,{class:"size-4"}),t[0]||(t[0]=p("2FA Recovery Codes ",-1))]),_:1,__:[0]}),n(e.CardDescription,null,{default:l(()=>t[1]||(t[1]=[p(" Recovery codes let you regain access if you lose your 2FA device. Store them in a secure password manager. ",-1)])),_:1,__:[1]})]),_:1}),n(e.CardContent,null,{default:l(()=>[i("div",yt,[n(e.Button,{onClick:e.toggleRecoveryCodesVisibility,class:"w-fit"},{default:l(()=>[(a(),_(Z(e.isRecoveryCodesVisible?e.EyeOff:e.Eye),{class:"size-4"})),p(" "+S(e.isRecoveryCodesVisible?"Hide":"View")+" Recovery Codes ",1)]),_:1}),e.isRecoveryCodesVisible&&e.recoveryCodesList.length?(a(),_(e.Form,V({key:0},e.regenerateRecoveryCodes.form(),{method:"post",options:{preserveScroll:!0},onSuccess:e.fetchRecoveryCodes}),{default:l(({processing:s})=>[n(e.Button,{variant:"secondary",type:"submit",disabled:s},{default:l(()=>[n(e.RefreshCw),t[2]||(t[2]=p(" Regenerate Codes ",-1))]),_:2,__:[2]},1032,["disabled"])]),_:1},16,["onSuccess"])):Y("v-if",!0)]),i("div",{class:w(["relative overflow-hidden transition-all duration-300",e.isRecoveryCodesVisible?"h-auto opacity-100":"h-0 opacity-0"])},[e.errors?.length?(a(),c("div",mt,[n(e.AlertError,{errors:e.errors},null,8,["errors"])])):(a(),c("div",gt,[i("div",ht,[e.recoveryCodesList.length?(a(!0),c(h,{key:1},F(e.recoveryCodesList,(s,f)=>(a(),c("div",{key:f},S(s),1))),128)):(a(),c("div",bt,[(a(),c(h,null,F(8,s=>i("div",{key:s,class:"h-4 animate-pulse rounded bg-muted-foreground/20"})),64))]))],512),t[3]||(t[3]=i("p",{class:"text-xs text-muted-foreground select-none"},[p(" Each recovery code can be used once to access your account and will be removed after use. If you need more, click "),i("span",{class:"font-bold"},"Regenerate Codes"),p(" above. ")],-1))]))],2)]),_:1})]),_:1})}const Ct=y(vt,[["render",wt],["__file","/var/www/resources/js/components/TwoFactorRecoveryCodes.vue"]]),xt=v({__name:"TwoFactorSetupModal",props:$({requiresConfirmation:{type:Boolean,required:!0},twoFactorEnabled:{type:Boolean,required:!0}},{isOpen:{type:Boolean},isOpenModifiers:{}}),emits:["update:isOpen"],setup(r,{expose:t}){t();const o=r,e=ee(r,"isOpen"),{copy:d,copied:u}=Te(),{qrCodeSvg:s,manualSetupKey:f,clearSetupData:m,fetchSetupData:A,errors:Q}=O(),D=g(!1),B=g([]),U=M(()=>B.value.join("")),L=g(null),G=M(()=>o.twoFactorEnabled?{title:"Two-Factor Authentication Enabled",description:"Two-factor authentication is now enabled. Scan the QR code or enter the setup key in your authenticator app.",buttonText:"Close"}:D.value?{title:"Verify Authentication Code",description:"Enter the 6-digit code from your authenticator app",buttonText:"Continue"}:{title:"Enable Two-Factor Authentication",description:"To finish enabling two-factor authentication, scan the QR code or enter the setup key in your authenticator app",buttonText:"Continue"}),W=()=>{if(o.requiresConfirmation){D.value=!0,H(()=>{L.value?.querySelector("input")?.focus()});return}m(),e.value=!1},I=()=>{o.twoFactorEnabled&&m(),D.value=!1,B.value=[]};te(()=>e.value,async J=>{if(!J){I();return}s.value||await A()});const z={props:o,isOpen:e,copy:d,copied:u,qrCodeSvg:s,manualSetupKey:f,clearSetupData:m,fetchSetupData:A,errors:Q,showVerificationStep:D,code:B,codeValue:U,pinInputContainerRef:L,modalConfig:G,handleModalNextStep:W,resetModalState:I,AlertError:N,InputError:me,get Button(){return R},get Dialog(){return Ce},get DialogContent(){return we},get DialogDescription(){return be},get DialogHeader(){return he},get DialogTitle(){return ge},get PinInput(){return ke},get PinInputGroup(){return Se},get PinInputSlot(){return xe},get confirm(){return de},get Form(){return P},get Check(){return Ae},get Copy(){return Me},get Loader2(){return je},get ScanLine(){return Re}};return Object.defineProperty(z,"__isScriptSetup",{enumerable:!1,value:!0}),z}}),St={class:"mb-3 w-auto rounded-full border border-border bg-card p-0.5 shadow-sm"},kt={class:"relative overflow-hidden rounded-full border border-border bg-muted p-2.5"},Tt={class:"absolute inset-0 grid grid-cols-5 opacity-50"},Ft={class:"absolute inset-0 grid grid-rows-5 opacity-50"},jt={class:"relative flex w-auto flex-col items-center justify-center space-y-5"},At={class:"relative mx-auto flex max-w-md items-center overflow-hidden"},Dt={class:"relative mx-auto aspect-square w-64 overflow-hidden rounded-lg border border-border"},qt={key:0,class:"absolute inset-0 z-10 flex aspect-square h-auto w-full animate-pulse items-center justify-center bg-background"},Mt={key:1,class:"relative z-10 overflow-hidden border p-5"},Vt=["innerHTML"],Bt={class:"flex w-full items-center space-x-5"},Et={class:"flex w-full items-center justify-center space-x-2"},Pt={class:"flex w-full items-stretch overflow-hidden rounded-xl border border-border"},Rt={key:0,class:"flex h-full w-full items-center justify-center bg-muted p-3"},Ot=["value"],Lt=["value"],It={ref:"pinInputContainerRef",class:"relative w-full space-y-3"},zt={class:"flex w-full flex-col items-center justify-center space-y-3 py-2"},Ht={class:"flex w-full items-center space-x-5"};function Kt(r,t,o,e,d,u){return a(),_(e.Dialog,{open:e.isOpen,"onUpdate:open":t[5]||(t[5]=s=>e.isOpen=s)},{default:l(()=>[n(e.DialogContent,{class:"sm:max-w-md"},{default:l(()=>[n(e.DialogHeader,{class:"flex items-center justify-center"},{default:l(()=>[i("div",St,[i("div",kt,[i("div",Tt,[(a(),c(h,null,F(5,s=>i("div",{key:`col-${s}`,class:"border-r border-border last:border-r-0"})),64))]),i("div",Ft,[(a(),c(h,null,F(5,s=>i("div",{key:`row-${s}`,class:"border-b border-border last:border-b-0"})),64))]),n(e.ScanLine,{class:"relative z-20 size-6 text-foreground"})])]),n(e.DialogTitle,null,{default:l(()=>[p(S(e.modalConfig.title),1)]),_:1}),n(e.DialogDescription,{class:"text-center"},{default:l(()=>[p(S(e.modalConfig.description),1)]),_:1})]),_:1}),i("div",jt,[e.showVerificationStep?(a(),_(e.Form,V({key:1},e.confirm.form(),{"reset-on-error":"",onFinish:t[3]||(t[3]=s=>e.code=[]),onSuccess:t[4]||(t[4]=s=>e.isOpen=!1)}),{default:l(({errors:s,processing:f})=>[i("input",{type:"hidden",name:"code",value:e.codeValue},null,8,Lt),i("div",It,[i("div",zt,[n(e.PinInput,{id:"otp",placeholder:"○",modelValue:e.code,"onUpdate:modelValue":t[1]||(t[1]=m=>e.code=m),type:"number",otp:""},{default:l(()=>[n(e.PinInputGroup,null,{default:l(()=>[(a(),c(h,null,F(6,(m,A)=>n(e.PinInputSlot,{autofocus:"",key:m,index:A,disabled:f},null,8,["index","disabled"])),64))]),_:2},1024)]),_:2},1032,["modelValue"]),n(e.InputError,{message:s?.confirmTwoFactorAuthentication?.code},null,8,["message"])]),i("div",Ht,[n(e.Button,{type:"button",variant:"outline",class:"w-auto flex-1",onClick:t[2]||(t[2]=m=>e.showVerificationStep=!1),disabled:f},{default:l(()=>t[7]||(t[7]=[p(" Back ",-1)])),_:2,__:[7]},1032,["disabled"]),n(e.Button,{type:"submit",class:"w-auto flex-1",disabled:f||e.codeValue.length<6},{default:l(()=>t[8]||(t[8]=[p(" Confirm ",-1)])),_:2,__:[8]},1032,["disabled"])])],512)]),_:1},16)):(a(),c(h,{key:0},[e.errors?.length?(a(),_(e.AlertError,{key:0,errors:e.errors},null,8,["errors"])):(a(),c(h,{key:1},[i("div",At,[i("div",Dt,[e.qrCodeSvg?(a(),c("div",Mt,[i("div",{innerHTML:e.qrCodeSvg,class:"flex aspect-square size-full items-center justify-center"},null,8,Vt)])):(a(),c("div",qt,[n(e.Loader2,{class:"size-6 animate-spin"})]))])]),i("div",Bt,[n(e.Button,{class:"w-full",onClick:e.handleModalNextStep},{default:l(()=>[p(S(e.modalConfig.buttonText),1)]),_:1})]),t[6]||(t[6]=i("div",{class:"relative flex w-full items-center justify-center"},[i("div",{class:"absolute inset-0 top-1/2 h-px w-full bg-border"}),i("span",{class:"relative bg-card px-2 py-1"},"or, enter the code manually")],-1)),i("div",Et,[i("div",Pt,[e.manualSetupKey?(a(),c(h,{key:1},[i("input",{type:"text",readonly:"",value:e.manualSetupKey,class:"h-full w-full bg-background p-3 text-foreground"},null,8,Ot),i("button",{onClick:t[0]||(t[0]=s=>e.copy(e.manualSetupKey||"")),class:"relative block h-auto border-l border-border px-3 hover:bg-muted"},[e.copied?(a(),_(e.Check,{key:0,class:"w-4 text-green-500"})):(a(),_(e.Copy,{key:1,class:"w-4"}))])],64)):(a(),c("div",Rt,[n(e.Loader2,{class:"size-4 animate-spin"})]))])])],64))],64))])]),_:1})]),_:1},8,["open"])}const Nt=y(xt,[["render",Kt],["__file","/var/www/resources/js/components/TwoFactorSetupModal.vue"]]),Qt=v({__name:"Badge",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1},variant:{type:null,required:!1},class:{type:null,required:!1}},setup(r,{expose:t}){t();const o=r,e=Fe(o,"class"),d={props:o,delegatedProps:e,get Primitive(){return ye},get cn(){return C},get badgeVariants(){return Wt}};return Object.defineProperty(d,"__isScriptSetup",{enumerable:!1,value:!0}),d}});function Ut(r,t,o,e,d,u){return a(),_(e.Primitive,V({"data-slot":"badge",class:e.cn(e.badgeVariants({variant:o.variant}),e.props.class)},e.delegatedProps),{default:l(()=>[b(r.$slots,"default")]),_:3},16,["class"])}const Gt=y(Qt,[["render",Ut],["__file","/var/www/resources/js/components/ui/badge/Badge.vue"]]),Wt=K("inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground"}},defaultVariants:{variant:"default"}}),Jt=v({__name:"TwoFactor",props:{requiresConfirmation:{type:Boolean,required:!1,default:!1},twoFactorEnabled:{type:Boolean,required:!1,default:!1}},setup(r,{expose:t}){t();const o=[{title:"Two-Factor Authentication",href:ue.url()}],{hasSetupData:e,clearTwoFactorAuthData:d}=O(),u=g(!1);re(()=>{d()});const s={breadcrumbs:o,hasSetupData:e,clearTwoFactorAuthData:d,showSetupModal:u,HeadingSmall:fe,TwoFactorRecoveryCodes:Ct,TwoFactorSetupModal:Nt,get Badge(){return Gt},get Button(){return R},AppLayout:De,SettingsLayout:pe,get disable(){return ve},get enable(){return _e},get Form(){return P},get Head(){return oe},get ShieldBan(){return Oe},get ShieldCheck(){return Le}};return Object.defineProperty(s,"__isScriptSetup",{enumerable:!1,value:!0}),s}}),Xt={class:"space-y-6"},Yt={key:0,class:"flex flex-col items-start justify-start space-y-4"},Zt={key:1,class:"flex flex-col items-start justify-start space-y-4"},$t={class:"relative inline"};function er(r,t,o,e,d,u){return a(),_(e.AppLayout,{breadcrumbs:e.breadcrumbs},{default:l(()=>[n(e.Head,{title:"Two-Factor Authentication"}),n(e.SettingsLayout,null,{default:l(()=>[i("div",Xt,[n(e.HeadingSmall,{title:"Two-Factor Authentication",description:"Manage your two-factor authentication settings"}),o.twoFactorEnabled?(a(),c("div",Zt,[n(e.Badge,{variant:"default"},{default:l(()=>t[7]||(t[7]=[p("Enabled",-1)])),_:1,__:[7]}),t[9]||(t[9]=i("p",{class:"text-muted-foreground"}," With two-factor authentication enabled, you will be prompted for a secure, random pin during login, which you can retrieve from the TOTP-supported application on your phone. ",-1)),n(e.TwoFactorRecoveryCodes),i("div",$t,[n(e.Form,ae(ne(e.disable.form())),{default:l(({processing:s})=>[n(e.Button,{variant:"destructive",type:"submit",disabled:s},{default:l(()=>[n(e.ShieldBan),t[8]||(t[8]=p(" Disable 2FA ",-1))]),_:2,__:[8]},1032,["disabled"])]),_:1},16)])])):(a(),c("div",Yt,[n(e.Badge,{variant:"destructive"},{default:l(()=>t[3]||(t[3]=[p("Disabled",-1)])),_:1,__:[3]}),t[6]||(t[6]=i("p",{class:"text-muted-foreground"}," When you enable two-factor authentication, you will be prompted for a secure pin during login. This pin can be retrieved from a TOTP-supported application on your phone. ",-1)),i("div",null,[e.hasSetupData?(a(),_(e.Button,{key:0,onClick:t[0]||(t[0]=s=>e.showSetupModal=!0)},{default:l(()=>[n(e.ShieldCheck),t[4]||(t[4]=p("Continue Setup ",-1))]),_:1,__:[4]})):(a(),_(e.Form,V({key:1},e.enable.form(),{onSuccess:t[1]||(t[1]=s=>e.showSetupModal=!0)}),{default:l(({processing:s})=>[n(e.Button,{type:"submit",disabled:s},{default:l(()=>[n(e.ShieldCheck),t[5]||(t[5]=p("Enable 2FA",-1))]),_:2,__:[5]},1032,["disabled"])]),_:1},16))])])),n(e.TwoFactorSetupModal,{isOpen:e.showSetupModal,"onUpdate:isOpen":t[2]||(t[2]=s=>e.showSetupModal=s),requiresConfirmation:o.requiresConfirmation,twoFactorEnabled:o.twoFactorEnabled},null,8,["isOpen","requiresConfirmation","twoFactorEnabled"])])]),_:1})]),_:1})}const br=y(Jt,[["render",er],["__file","/var/www/resources/js/pages/settings/TwoFactor.vue"]]);export{br as default};
